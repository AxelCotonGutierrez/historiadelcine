---
layout: default
title: Pel√≠culas
permalink: /Peliculas/
description: Lista cronol√≥gica de todas las pel√≠culas del archivo hist√≥rico.
comments: true
---

<div class="container" style="max-width: 1000px;">
  <h1>üìΩÔ∏è Pel√≠culas (orden cronol√≥gico)</h1>
  <table id="tabla-peliculas" style="width: 100%; border-collapse: collapse;">
    <thead>
      <tr>
        <th style="border-bottom: 2px solid #333;">A√±o</th>
        <th style="border-bottom: 2px solid #333;">T√≠tulo Original</th>
        <th style="border-bottom: 2px solid #333;">Directores</th>
        <th style="border-bottom: 2px solid #333;">Pa√≠ses</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>


<br>
<br>
<script>
const BASE_URL = "/historiadelcine/assets/js/json_generados/";
const tablaBody = document.querySelector("#tabla-peliculas tbody");
const contenedorFicha = document.getElementById("resultados"); // debe existir en el HTML

// 1Ô∏è‚É£ Cargar TODA la tabla principal: index por a√±o + cada a√±o.json
fetch(BASE_URL + "por_a√±o/index.json")
  .then(r => r.json())
  .then(listaAnios => {
    const promesas = listaAnios.map(anio =>
      fetch(BASE_URL + "por_a√±o/" + anio + ".json")
        .then(r => r.json())
        .catch(() => [])
    );

    Promise.all(promesas).then(resultados => {
      const peliculas = resultados.flat();
      peliculas.sort((a, b) => (a.a√±o || 0) - (b.a√±o || 0));
      mostrarPeliculas(peliculas);
    }).catch(err => console.error("Error combinando JSONs:", err));
  })
  .catch(err => console.error("No se pudo cargar index.json:", err));

// 2Ô∏è‚É£ Mostrar tabla con links din√°micos (sin redirigir)
function mostrarPeliculas(peliculas) {
  peliculas.forEach(p => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td><a href="#" onclick="buscarDirecto('por_a√±o', '${p.a√±o}'); return false;">${p.a√±o || "-"}</a></td>
      <td><a href="${p.post}" target="_blank">${p.titulo_original || "-"}</a></td>
      <td>
        ${(p.directores || []).map(d =>
          `<a href="#" onclick="buscarDirecto('por_directores', '${d}'); return false;">${d}</a>`
        ).join(", ") || "‚Äî"}
      </td>
      <td>
        ${(p.paises || []).map(pais =>
          `<a href="#" onclick="buscarDirecto('por_paises', '${pais}'); return false;">${pais}</a>`
        ).join(", ") || "‚Äî"}
      </td>
    `;
    tablaBody.appendChild(tr);
  });
}

// 3Ô∏è‚É£ Funci√≥n GLOBAL: buscar un archivo filtrado y pintar ficha bajo la tabla
window.buscarDirecto = function(carpeta, nombre) {
  const archivo = nombre.replace(/ /g, "_") + ".json";
  const ruta = `${BASE_URL}${carpeta}/${archivo}`;

  contenedorFicha.innerHTML = "<p style='padding:1em;'>üîç Cargando informaci√≥n...</p>";

  fetch(ruta)
    .then(r => r.json())
    .then(data => mostrarFicha(data))
    .catch(() => {
      contenedorFicha.innerHTML = "<p style='padding:1em;'>‚ùå No se encontr√≥ informaci√≥n.</p>";
    });
}

// 4Ô∏è‚É£ Pintar la ficha completa de resultados filtrados
window.mostrarFicha = function(peliculas) {
  let html = `
    <div class="table-responsive">
      <table class="table ficha-table">
        <tbody>
  `;

  const crearEnlaces = (lista, carpeta) => {
    if (!lista || lista.length === 0) return "‚Äî";
    return lista.map(nombre =>
      `<a href="#" onclick="buscarDirecto('${carpeta}', '${nombre}'); return false;">${nombre}</a>`
    ).join(", ");
  };

  peliculas.forEach(p => {
    html += `
      <tr>
        <td rowspan="7" style="width: 200px;">
          <img src="${p.imagen}" alt="Portada de ${p.titulo}" style="width: 100%; border-radius: 6px;">
        </td>
        <td><strong>A√±o:</strong> <a href="#" onclick="buscarDirecto('por_a√±o', '${p.a√±o}'); return false;">${p.a√±o || "‚Äî"}</a></td>
      </tr>
      <tr>
        <td><strong>T√≠tulo:</strong> <a href="${p.post}" target="_blank">${p.titulo || "‚Äî"}</a></td>
      </tr>
      <tr>
        <td><strong>T√≠tulo Original:</strong> ${p.titulo_original || "‚Äî"}</td>
      </tr>
      <tr>
        <td><strong>Director:</strong> ${crearEnlaces(p.directores, "por_directores")}</td>
      </tr>
      <tr>
        <td><strong>Duraci√≥n:</strong> ${p.duracion || "‚Äî"}</td>
      </tr>
      <tr>
        <td><strong>Productores:</strong> ${crearEnlaces(p.productores, "por_productores")}</td>
      </tr>
      <tr>
        <td><strong>Guionistas:</strong> ${crearEnlaces(p.guionistas, "por_guionistas")}</td>
      </tr>
      <tr>
        <td colspan="2"><strong>Actores:</strong> ${crearEnlaces(p.actores, "por_actores")}</td>
      </tr>
      <tr>
        <td colspan="2"><strong>Estudio:</strong> ${crearEnlaces(p.estudio, "por_estudio")} &nbsp; | &nbsp;
        <strong>Pa√≠ses:</strong> ${crearEnlaces(p.paises, "por_paises")}</td>
      </tr>
      <tr>
        <td colspan="2"><strong>Observaciones:</strong> ${p.observaciones || "‚Äî"}</td>
      </tr>
      <tr><td colspan="2" class="separador"></td></tr>
    `;
  });

  html += `
        </tbody>
      </table>
    </div>
  `;

  contenedorFicha.innerHTML = html;
}
</script>



<style>
#tabla-peliculas {
  width: 95%;
  max-width: 1000px;
  margin: 0 auto;
  border-collapse: collapse;
  font-size: 14px;
}

#tabla-peliculas th,
#tabla-peliculas td {
  border: 1px solid #ddd;
  padding: 8px 12px;
  text-align: left;
  vertical-align: top;
}

#tabla-peliculas th {
  background-color: #f8f8f8;
  font-weight: bold;
  font-size: 16px;
}

#tabla-peliculas tr:nth-child(even) {
  background-color: #f9f9f9;
}

#tabla-peliculas tr:hover {
  background-color: #f1f1f1;
}

#tabla-peliculas a {
  color: #007acc;
  text-decoration: none;
}

#tabla-peliculas a:hover {
  text-decoration: underline;
}
</style>



