---
layout: default
title: Pel√≠culas
permalink: /Peliculas/
description: Lista cronol√≥gica de todas las pel√≠culas del archivo hist√≥rico.
comments: true
---

<div class="container" style="max-width: 1000px;">
  <h1>üìΩÔ∏è Todas las pel√≠culas (orden cronol√≥gico)</h1>
  <table id="tabla-peliculas" style="width: 100%; border-collapse: collapse;">
    <thead>
      <tr>
        <th style="border-bottom: 2px solid #333;">A√±o</th>
        <th style="border-bottom: 2px solid #333;">T√≠tulo Original</th>
        <th style="border-bottom: 2px solid #333;">Directores</th>
        <th style="border-bottom: 2px solid #333;">Pa√≠ses</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>


<br>
<br>
<script>
const BASE_URL = "/historiadelcine/assets/js/json_generados/por_a√±o/";
const tablaBody = document.querySelector("#tabla-peliculas tbody");

// Cargar √≠ndice simple (solo n√∫meros)
fetch(BASE_URL + "index.json")
  .then(r => r.json())
  .then(listaAnios => {
    // Ahora a√±adir ".json" a cada n√∫mero
    const promesas = listaAnios.map(anio =>
      fetch(BASE_URL + anio + ".json")
        .then(r => r.json())
        .catch(() => [])
    );

    Promise.all(promesas).then(resultados => {
      // Combinar todos los arrays de cada a√±o
      const peliculas = resultados.flat();

      // Ordenar por a√±o num√©rico ascendente
      peliculas.sort((a, b) => (a.a√±o || 0) - (b.a√±o || 0));

      mostrarPeliculas(peliculas);
    }).catch(err => {
      console.error("Error combinando JSONs:", err);
    });
  })
  .catch(err => {
    console.error("No se pudo cargar index.json:", err);
  });

function mostrarPeliculas(peliculas) {
  peliculas.forEach(p => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${p.a√±o || "-"}</td>
      <td><a href="${p.post}">${p.titulo_original || "-"}</a></td>
      <td>
        ${(p.directores || []).map(d => `<a href="/Buscador/?dir=${encodeURIComponent(d)}">${d}</a>`).join(", ") || "‚Äî"}
      </td>
      <td>
        ${(p.paises || []).map(pais => `<a href="/Buscador/?pais=${encodeURIComponent(pais)}">${pais}</a>`).join(", ") || "‚Äî"}
      </td>
    `;
    tablaBody.appendChild(tr);
  });
}
</script>



