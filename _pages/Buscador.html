---
layout: default
title: Buscador
permalink: /Buscador/
description: Buscador de pelÃ­culas, directores, actores, ...
comments: true
---

<div class="container" style="max-width: 900px;">
  <h1>ðŸŽ¬ Buscador por categorÃ­a</h1>

  <ul class="nav nav-tabs mb-3" id="pestanas-busqueda">
    <li class="nav-item"><a class="nav-link active" data-carpeta="por_directores" href="#">Directores</a></li>
    <li class="nav-item"><a class="nav-link" data-carpeta="por_productores" href="#">Productores</a></li>
    <li class="nav-item"><a class="nav-link" data-carpeta="por_guionistas" href="#">Guionistas</a></li>
    <li class="nav-item"><a class="nav-link" data-carpeta="por_actores" href="#">Actores</a></li>
    <li class="nav-item"><a class="nav-link" data-carpeta="por_estudio" href="#">Estudios</a></li>
    <li class="nav-item"><a class="nav-link" data-carpeta="por_paises" href="#">PaÃ­ses</a></li>
    <li class="nav-item"><a class="nav-link" data-carpeta="por_aÃ±o" href="#">AÃ±os</a></li>
  </ul>

  <input type="text" id="input-busqueda" class="form-control mb-3" placeholder="Buscar por nombre de categorÃ­a (ej. Francia, Muybridge...)">

  <div id="resultados"></div>
</div>

<script>
const BASE_URL = "/historiadelcine/assets/js/json_generados/";
let carpetaActual = "";
let cache = {};

function buscarYMostrarArchivo() {
  const texto = document.getElementById("input-busqueda").value.trim();
  if (!texto || !carpetaActual) {
    document.getElementById("resultados").innerHTML = "<p>Introduce un valor de bÃºsqueda.</p>";
    return;
  }

  const nombreArchivo = texto.replace(/ /g, "_").replace(/\//g, "-") + ".json";
  const ruta = BASE_URL + carpetaActual + "/" + nombreArchivo;

  document.getElementById("resultados").innerHTML = "<p>Buscando...</p>";

  fetch(ruta)
    .then(r => {
      if (!r.ok) throw new Error("Archivo no encontrado");
      return r.json();
    })
    .then(peliculas => {
      mostrarListado(peliculas);
    })
    .catch(() => {
      document.getElementById("resultados").innerHTML = "<p>No se encontraron resultados.</p>";
    });
}

function mostrarListado(peliculas) {
  const contenedor = document.getElementById("resultados");
  contenedor.innerHTML = "";

  peliculas.forEach(p => {
    const div = document.createElement("div");
    div.className = "list-group-item";
    div.innerHTML = `
      <div class="row">
        <div class="col-md-4">
          <img src="${p.imagen}" alt="${p.titulo}" class="img-fluid rounded mb-3" />
        </div>
        <div class="col-md-8">
          <h4>${p.titulo} (${p.aÃ±o})</h4>
          <p><strong>Original:</strong> ${p.titulo_original || "â€”"}</p>
          <p><strong>DuraciÃ³n:</strong> ${p.duracion || "â€”"}</p>
          <p><strong>Directores:</strong> ${(p.directores || []).join(", ") || "â€”"}</p>
          <p><strong>Productores:</strong> ${(p.productores || []).join(", ") || "â€”"}</p>
          <p><strong>Guionistas:</strong> ${(p.guionistas || []).join(", ") || "â€”"}</p>
          <p><strong>Actores:</strong> ${(p.actores || []).join(", ") || "â€”"}</p>
          <p><strong>Estudio:</strong> ${(p.estudio || []).join(", ") || "â€”"}</p>
          <p><strong>PaÃ­ses:</strong> ${(p.paises || []).join(", ") || "â€”"}</p>
          <p><strong>Notas:</strong> ${p.observaciones || "â€”"}</p>
          <p><a href="${p.post}" class="btn btn-sm btn-outline-primary">Ver ficha completa</a></p>
        </div>
      </div>
    `;
    contenedor.appendChild(div);
  });
}

// Evento al cambiar de pestaÃ±a
document.querySelectorAll("#pestanas-busqueda .nav-link").forEach(tab => {
  tab.addEventListener("click", e => {
    e.preventDefault();
    document.querySelectorAll("#pestanas-busqueda .nav-link").forEach(el => el.classList.remove("active"));
    tab.classList.add("active");
    carpetaActual = tab.getAttribute("data-carpeta");
    document.getElementById("resultados").innerHTML = "";
  });
});

// Evento de bÃºsqueda
document.getElementById("input-busqueda").addEventListener("input", buscarYMostrarArchivo);
</script>

